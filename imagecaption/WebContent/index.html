<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Home</title>
<script type="text/javascript" src="./js/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="./js/bootstrap.js"></script>
<script src="js/jquery.min.js"></script>
<link href="./css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="./css/MIDIPlayer.css" rel="stylesheet" type="text/css" />
<link href="./css/style.css" rel='stylesheet' type='text/css' />
<link href="./css/stylecontent.css" rel="stylesheet">
<!-- shim -->
<script src="./inc/shim/Base64.js" type="text/javascript"></script>
<script src="./inc/shim/Base64binary.js" type="text/javascript"></script>
<script src="./inc/shim/WebAudioAPI.js" type="text/javascript"></script>
<script src="./inc/shim/WebMIDIAPI.js" type="text/javascript"></script>
<!-- jasmid package -->
<script src="./inc/jasmid/stream.js"></script>
<script src="./inc/jasmid/midifile.js"></script>
<script src="./inc/jasmid/replayer.js"></script>
<!-- midi.js package -->
<script src="./js/midi/audioDetect.js" type="text/javascript"></script>
<script src="./js/midi/gm.js" type="text/javascript"></script>
<script src="./js/midi/loader.js" type="text/javascript"></script>
<script src="./js/midi/plugin.audiotag.js" type="text/javascript"></script>
<script src="./js/midi/plugin.webaudio.js" type="text/javascript"></script>
<script src="./js/midi/plugin.webmidi.js" type="text/javascript"></script>
<script src="./js/midi/player.js" type="text/javascript"></script>
<script src="./js/midi/synesthesia.js" type="text/javascript"></script>
<!-- utils -->
<script src="./js/util/dom_request_xhr.js" type="text/javascript"></script>
<script src="./js/util/dom_request_script.js" type="text/javascript"></script>
<!-- includes -->
<script src="./inc/timer.js" type="text/javascript"></script>
<script src="./inc/colorspace.js" type="text/javascript"></script>
<script src="./inc/event.js" type="text/javascript"></script>
<script type="text/javascript" src="js/move-top.js"></script>
<script type="text/javascript" src="js/easing.js"></script>
<script src="./js/jquery-1.11.1.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!---- start-smoth-scrolling---->
<!-- Custom Theme files -->
<link href="css/theme-style.css" rel='stylesheet' type='text/css' />
<!----font-Awesome----->
<link rel="stylesheet" href="fonts/css/font-awesome.min.css">
<!----font-Awesome----->
<!----webfonts---->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700' rel='stylesheet' type='text/css'>
</head>
<style>
.spotlight {
    position: fixed;
    visibility: hidden;
}
.title3{
color: transparent;
background-color : black;
text-shadow : rgba(255,255,255,0.5) 0 5px 6px, rgba(255,255,255,0.2) 1px 3px 3px;
-webkit-background-clip : text;
}

.circle{
    width: 20px;
    height: 20px;
    display: inline-block;
    line-height: 20px;
    text-align: center;
    padding: 5px;
    margin: 5px;
    border-radius:20px;
    background-color: orange;
    
}

.paperpanel{
  font-family: 宋体; font-size: 15px; color:#E7EAEB; font-weight: none; 
  text-decoration: none;
  background-color: #F5F5F5;
  margin: 20 20 20 20;
  padding: 10 10 10 10;
  background: url('./images/bg.png');
 
}
.paperpanel2{
  font-family: 宋体; font-size: 15px; color:#E7EAEB; font-weight: none; 
  text-decoration: none;
  background: url('./images/bg.png');
  margin: 20 20 20 20;
  padding: 10 10 10 10;

}
.paperimgtitle {
	font-family: Lucida Sans Unicode,Verdana;
	font-size:12px;
	text-align:center;
    color:black;
}
.papertitle {
	font-family: Lucida Sans Unicode,Verdana;
	font-size:12px;
	text-align:center;
    color:black;
    padding-top:50px
}
.example {
      font-family: Lucida Sans Unicode,Verdana;
      font-size:20px;
      color:black;
}
.author {
      font-family: Lucida Sans Unicode,Verdana;
      font-size:20px;
      text-align:center;
      color:black;
}
.papersubtitle {
      font-family: Lucida Sans Unicode,Verdana;
      font-size:25px;
      padding:75px;

}
.papertext {
	  line-height:120%;
      font-family: Lucida Sans Unicode,Verdana;
      font-size:20px;
      color:black;
}
.contenttext {
	  line-height:120%;
      font-family: Lucida Sans Unicode,Verdana;
      font-size:20px;
      color:black;
}
.content {
	  line-height:120%;
      font-family: Lucida Sans Unicode,Verdana;
      font-size:50px;
      color:black;
}
.mor{
	width:50%;
	padding-left: 20px;
}
.more {
	background: #4999AF;
	color: #fff;
	text-decoration: none;
	font-size: 16px;
	font-weight: 300;
	padding: 0.2em 1.2em;
	display: inline-block;
	text-decoration: none;
	border-radius: 3px;
	text-align: center;
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	-o-border-radius: 3px;
	-msborder-radius: 3px;
}
.label {
	margin:6px;
}
.tranbutton{
margin-top:10px;
}
.result{
margin-top:10px;
}
.square {
	width:800px;
	height:400px;
}
.btn-group{
	padding:15px;
}
.papertitle{
line-height:100%;
font-size:12px;
	font-size:50px;
	font-family:黑体;
	color:black;
}
#player{
	width: 500px;
	margin-left:950px;
}
 #log {width:440px; height:200px; border:1px solid #7F9DB9; overflow:auto;}
 #msg {width:440px;}
</style>
<script>
var socket;
var pictrue;
var select = 0;
var X = 0;
var Y = 0;
var R = 0;
var captionstart = 0;
var inite = 0;
var seq = "";
var bias = 0;
function trans(section){
	captionstart = 1;
	var msg;
	if(section == 1)
		msg ="";
	else
		msg = pictrue;
    if(!msg && select!=3){ 
        alert("Message can not be empty"); 
        return;
    }
    try{ 
        socket.send("select:"+select+" "+msg);
    }catch(ex){
       
    }
}

function option(selection){
    var prevDiv = document.getElementById('output');
	if(selection == 0){
		picture = "";
		select = 0;
		bias = 80;
		$(".notice").addClass("hidden");
		$(".music").removeClass("hidden");
		$(".inputbutton").removeClass("hidden");
		prevDiv.innerHTML = '<div id="output"><span class = "glyphicon glyphicon-music"></span>Result:</div>';
		var prevDiv = document.getElementById('preview');
		prevDiv.innerHTML = '<img src="" id="flower" class="demo092 spotlight"/>';


	}
	else if(selection == 1){
		picture = "";
		select = 1;
		bias = -50;
		$(".notice").addClass("hidden");
		$(".music").addClass("hidden");
		$(".inputbutton").removeClass("hidden");
		prevDiv.innerHTML = '<div id="output"><span class = "glyphicon glyphicon-pencil"></span>Result:</div>';
		var prevDiv = document.getElementById('preview');
		prevDiv.innerHTML = '<img src="" id="flower" class="demo092 spotlight"/>';

	}
	else{
		picture = "";
		select = 3;
		$(".music").removeClass("hidden");
		$(".inputbutton").addClass("hidden");
		$(".notice").removeClass("hidden");
		prevDiv.innerHTML = '<div id="output"><span class = "glyphicon glyphicon-music"></span>Result:</div>';
		var prevDiv = document.getElementById('preview');
		prevDiv.innerHTML = '<img src="./example.png" id="flower" class="demo092 spotlight"/>';
	    if (!inite){
	        scrawl.loadExtensions({
	            path: 'http://wow.techbrood.com/uploads/160101/scrawl-canvas/',
	            minified: false,
	            extensions: ['block', 'images', 'animation'],
	            callback: function() {
	                scrawl.init();
	                mycode();
	                X = 0;
	                Y = 0;
	            },
	        });
	        }
	        else{
	        	setTimeout(reloadpic, 1000);
	            
	        }
		}
}
function preview(file) {
    var prevDiv = document.getElementById('preview');
        // 支持大多数浏览器， 谷歌， 火狐， 360 ， 欧朋  IE10.
        var reader = new FileReader();
        reader.onload = function(evt) {
        	pictrue = evt.target.result;
            prevDiv.innerHTML = '<img src="' + evt.target.result + '" id="flower" class="demo092 spotlight"/>';
        }
       reader.readAsDataURL(file.files[0]);
    
    if (!inite){
    scrawl.loadExtensions({
        path: 'http://wow.techbrood.com/uploads/160101/scrawl-canvas/',
        minified: false,
        extensions: ['block', 'images', 'animation'],
        callback: function() {
            scrawl.init();
            mycode();
            X = 0;
            Y = 0;
        },
    });
    }
    else{
    	setTimeout(reloadpic, 1000);
        
    }

}
function reloadpic(){
	scrawl.getImagesByClass('demo092');
    scrawl.makePicture({
        source: 'flower',
        width: 800,
        height: 400,
    });
}
$(document).ready(function(){
	$(".demo092").addClass("hidden");
	$(".notice").addClass("hidden");
	var host = "ws://localhost:8080/";
	var rbias = 0;
	var xbias = 0;
	select = 0;
    try{
        socket = new WebSocket(host);
        socket.onopen    = function(msg){ 
            console.log("socket session create sucess!"); 
        };
        socket.onmessage = function(msg){ 
            console.log(msg);
            var radium = 0;
            if(select == 0){
            	rbias = 2;
            	radium = 50;
            	xbias = 220
            	
            }
            else{
            	rbias = 0;
            	radium = 25;
            	xbias = 0;
            }
            label = msg.data.split(':')[0];
            data = msg.data.split(':')[1];
            if (label == 'test'){
        		$('#msg').html(data);
        		captionstart = 0;
        		inite = 1;
        		seq = "";
        		X = 0;
                Y = 0;
            	player.loadFile('./b.mid', player.pause);
        		}
            else if(label == 'image')
            	{
            			position = data.split(",");
            			X = (position[1])*radium+xbias;
						Y = position[0]*radium+bias;
						if (position[2] == 0)
							R = (position[2]+rbias)*(radium)+30;
						else
							R = (position[2])*(radium)+30;
						if(position[3] ){
						seq +=position[3];
						seq +=" ";
						$('#msg').html(seq);
						}
            	}
            
        };
        socket.onclose   = function(msg){ console.log("close Sucess"); };
        socket.onerror   = function(msg){ console.log("Error!"); };
    }catch(ex){
        log(ex);
    }

});
if (typeof (console) === "undefined") var console = {
		log: function() {}
	};
	// Toggle between Pause and Play modes.
	var pausePlayStop = function(stop) {
		var d = document.getElementById("pausePlayStop");
		if (stop) {
			MIDI.Player.stop();
			d.src = "./images/play.png";
		} else if (MIDI.Player.playing) {
			d.src = "./images/play.png";
			MIDI.Player.pause(true);
		} else {
			d.src = "./images/pause.png";
			MIDI.Player.resume();
		}
	};
	eventjs.add(window, "load", function(event) {
		var link = document.createElement("link");
		link.href = "//fonts.googleapis.com/css?family=Oswald";
		link.ref = "stylesheet";
		link.type = "text/css";
		document.body.appendChild(link);
		var link = document.createElement("link");
		link.href = "//fonts.googleapis.com/css?family=Andada";
		link.ref = "stylesheet";
		link.type = "text/css";
		document.body.appendChild(link);
		
		/// load up the piano keys
		var colors = document.getElementById("colors");
		var colorElements = [];
		for (var n = 0; n < 88; n++) {
			var d = document.createElement("div");
			d.innerHTML = MIDI.noteToKey[n + 21];
			colorElements.push(d);
			colors.appendChild(d);
		}
		///
		MIDI.loader = new sketch.ui.Timer;
		MIDI.loadPlugin({
			soundfontUrl: "./soundfont/",
			onprogress: function(state, progress) {
				MIDI.loader.setValue(progress * 100);
			},
			onsuccess: function() {
				/// this is the language we are running in
				/// this sets up the MIDI.Player and gets things going...
				player = MIDI.Player;
				player.timeWarp = 1; // speed the song is played back
				player.loadFile('./a.mid', player.pause);
				/// control the piano keys colors
				var colorMap = MIDI.Synesthesia.map();
				player.addListener(function(data) {
					var pianoKey = data.note - 21;
					var d = colorElements[pianoKey];
					if (d) {
						if (data.message === 144) {
							var map = colorMap[data.note - 27];
							if (map) d.style.background = map.hex;
							d.style.color = "#fff";
						} else {
							d.style.background = "";
							d.style.color = "";
						}
					}
				});
				///
				MIDIPlayerPercentage(player);
			}
		});
	});

	var MIDIPlayerPercentage = function(player) {
		// update the timestamp
		var time1 = document.getElementById("time1");
		var time2 = document.getElementById("time2");
		var capsule = document.getElementById("capsule");
		var timeCursor = document.getElementById("cursor");
		//
		eventjs.add(capsule, "drag", function(event, self) {
			eventjs.cancel(event);
			player.currentTime = (self.x) / 420 * player.endTime;
			if (player.currentTime < 0) player.currentTime = 0;
			if (player.currentTime > player.endTime) player.currentTime = player.endTime;
			if (self.state === "down") {
				player.pause(true);
			} else if (self.state === "up") {
				player.resume();
			}
		});
		//
		function timeFormatting(n) {
			var minutes = n / 60 >> 0;
			var seconds = String(n - (minutes * 60) >> 0);
			if (seconds.length == 1) seconds = "0" + seconds;
			return minutes + ":" + seconds;
		};
		player.getNextSong = function(n) {
			var id = Math.abs((songid += n) % song.length);
			player.loadFile(song[id], player.start); // load MIDI
		};
		player.setAnimation(function(data, element) {
			var percent = data.now / data.end;
			var now = data.now >> 0; // where we are now
			var end = data.end >> 0; // end of song
			
			// display the information to the user
			timeCursor.style.width = (percent * 100) + "%";
			time1.innerHTML = timeFormatting(now);
			time2.innerHTML = "-" + timeFormatting(end - now);
			if (now === end) { 
				player.loadFile('./a.mid', player.pause);
				$("#pausePlayStop")[0].src="./images/play.png" ;
			}
		});
	};
	
	var ColorSphereBackground = function() {
		var d = document;
		var canvas = document.createElement("canvas");
		var ctx = canvas.getContext("2d");
		canvas.style.cssText = "position: fixed; left: 0; top: 0; opacity: 1";
		canvas.style.width = window.innerWidth + "px";
		canvas.style.height = window.innerHeight + "px";
		document.body.appendChild(canvas);
		//
		eventjs.add(window, "resize", function() {
			canvas.style.width = window.innerWidth + "px";
			canvas.style.height = window.innerHeight + "px";
			ctx.drawImage(theSphere = sphere(percent), 0, 0)
		});
		eventjs.add(d, "scroll", function(e) {
			var percent = 1 - document.body.scrollTop / document.body.scrollHeight;
			ctx.drawImage(theSphere = sphere(percent), 0, 0);
			onMouseMove();
		});
		var theSphere;
		var px = window.innerWidth / 2;
		var py = window.innerHeight / 2;
		var onMouseMove = function(event) {
			ctx.drawImage(theSphere, 0, 0);
			if (event) {
				var coords = eventjs.proxy.getCoord(event);
				coords.x -= document.body.scrollLeft;
				coords.y -= document.body.scrollTop;
				px = coords.x;
				py = coords.y;
			} else { // 
				var coords = {
					x: px,
					y: py
				};
			}
			//
			var x = (coords.x / window.innerWidth) * 255 - 127; // grab mouse pixel coords, center at midpoint
			var y = (coords.y / window.innerHeight) * 255 - 127;
			var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height); // get image data
			var data = imageData.data;
			for (var n = 0, length = data.length; n < length; n += 4) {
				data[n] = data[n] + x - y; // red (control left)
				data[n + 1] = data[n + 1] - x - y; // green (control right)
				data[n + 2] = data[n + 2] + y + y; // blue (control down)
			}
			ctx.putImageData(imageData, 0, 0);
		};
		eventjs.add(d, "mousemove", onMouseMove);
		///
		function sphere(top) { // create Sphere image, and apply to <canvas>
			var canvas1 = document.createElement("canvas");
			var ctx = canvas1.getContext("2d");
			var w = 75;
			var left = -20;
			var top = top * -50;
			canvas.width = canvas1.width = w * window.innerWidth / window.innerHeight;
			canvas.height = canvas1.height = w;
			ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
			n = 360;
			while (n--) { // go through hues
				var x = left + w;
				var y = top + w;
				var g = ctx.createLinearGradient(x, top, x, y);
				g.addColorStop(0, "#000");
				g.addColorStop(.5, "hsl(" + ((n + 60) % 360) + ",100%,50%)");
				g.addColorStop(1, "#FFF");
				ctx.beginPath(); // draw triangle
				ctx.moveTo(x, top);
				ctx.lineTo(x, y);
				ctx.lineTo(x + 2, y);
				ctx.lineTo(x + 5, top);
				ctx.fillStyle = g; // apply gradient
				ctx.fill();
				ctx.translate(x, y); // rotate + translate into position
				ctx.rotate((1 / 360) * Math.PI * 2);
				ctx.translate(-x, -y);
			}
			return canvas1;
		};
		//
		var percent = 1 - document.body.scrollTop / document.body.scrollHeight;
		ctx.drawImage(theSphere = sphere(percent), 0, 0)
	};
	
	// Begin loading indication.
	var player;
	// MIDI files from Disklavier World
	var songid = 0;
</script>
<body>
<script type="text/javascript" src="http://wow.techbrood.com/libs/jquery/jquery-2.1.1.min.js"></script>
<script src="http://wow.techbrood.com/uploads/160101/scrawl-canvas/scrawlCore.js"></script>
<script>
var mycode = function() {
    'use strict';
    //hide-start
    var testTicker = Date.now(),
        testTime = testTicker,
        testNow,
        testMessage = document.getElementById('testmessage');
    //hide-end

    //define variables
    var myPad = scrawl.pad.mycanvas,
        here,
        gradient,
        myGloom,
        mySpotlight;

    //import images into scrawl library
    scrawl.getImagesByClass('demo092');

    //define designs (gradient)
    gradient = scrawl.makeRadialGradient({
        name: 'spotlight',
        startRadius: 0,
        endRadius: 10,
        color: [{
            color: 'rgba(255,150,0,0.3)',
            stop: 0
        }, {
            color: 'rgba(123,104,238,0.6)',
            stop: 1
        }, ],
    });
	
    //define entitys
    scrawl.makePicture({
        source: 'flower',
        width: 800,
        height: 400,
    });

    myGloom = scrawl.makeBlock({
        name: 'gloomy',
        fillStyle: 'rgba(0,0,0,0)',
        method: 'fill',
        width: 800,
        height: 400,
        order: 1,
    });

    mySpotlight = myGloom.clone({
        name: 'shiny',
        fillStyle: 'spotlight',
    });

    //stop touchmove dragging the page up/down
    scrawl.addListener('move', function(e) {
        if (e) {
            e.stopPropagation();
            e.preventDefault();
        }
    }, scrawl.canvas.mycanvas);
    //animation object
    scrawl.makeAnimation({
        fn: function() {
            if (captionstart ) {
                gradient.set({
                    startX: X,
                    startY: Y,
                    endX: X,
                    endY: Y,
                    endRadius: R,
                });
                myGloom.set({
                    visibility: false
                });
                mySpotlight.set({
                    visibility: true
                });
            } 
            else {                
            	myGloom.set({
                    visibility: true
                });
                mySpotlight.set({
                    visibility: false
                });
            
}            scrawl.render();
        },
    });

};


</script>
<div class="container-fluid">
	<div class="row-fluid">
		<div class="span12 ">
		
			<a href = "http://www.ustc.edu.cn/">
				
				<h1 class ="title3">
					<img alt="50x50" src="./img/logo.png" width="50" height="50" />
					University of Science and Technology of China
				</h1>
			</a>
			<div class = "paperpanel">
				<p class = "papertitle">Transcribing Content from Structural Images with<br>Spotlight Mechanism </p>
				<p class = "author ">
					<span href = " ">
						Yu Yin ,
					</span>
					<span href = " ">
						Zhenya Huang ,
					</span>
					<a href = "http://staff.ustc.edu.cn/~cheneh">
						Enhong Chen ,
					</a>
					<a href = "http://staff.ustc.edu.cn/~qiliuql/ ">
						Qi Liu ,
					</a>
					<span href = " ">
						Fuzheng Zhang ,
					</span>
					<span href = " ">
						 Xing Xie ,
					</span>
					<span href = " ">
						 Guoping Hu ,
					</span>
				</p>
				<p class = "papersubtitle">
				 ABSTRACT<br>
					 <span class = "papertext">
					 	  Transcribing content from structural images, e.g., writing notes from music scores, is a challenging task as not only the content objects should be recognized, but the internal structure should also
						be preserved. Existing image recognition methods mainly work on images with simple content (e.g., text lines with characters),but are not capable to identify ones with more complex content
						(e.g., structured code), which often follow a fine-grained grammar. To this end, in this paper, we propose a hierarchical Spotlight Transcribing Network (STN) framework followed by a two-stage
						“where-to-what” solution. Specifically ,we first decide “where-to-look” through a novel spotlight mechanism to focus on different areas of the original image following its structure. Then, we decide
						“what-to-write” by developing a GRU based network with the spotlight areas for transcribing the content accordingly. Moreover, we propose two implementations on the basis of STN, i.e., STNM and
						STNR, where the spotlight movement follows the Markov property and Recurrent modeling, respectively. We also design a reinforcement method to refine our STN framework by self-improving the
						spotlight mechanism. We conduct extensive experiments on many structural image datasets, where the results clearly demonstrate the effectiveness  of STNframework.
					
					 </span>
				</p>
				<div class = "paperimgtitle"><img  src="./img/example.png" width="696" height="157" /></div>
			</div>			
		</div>
		<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1>
		<h1><span class="label label-info">DEMO</span></h1>
			<div class="btn-group">
					    <button id="btn0" type="button" class="btn btn-default" onclick="option(0)">melody</button>
					    <button id="btn1" type="button" class="btn btn-default" onclick="option(1)">formula</button>
					    <button id="btn2" type="button" class="btn btn-default" onclick="option(2)">help</button>
			</div>
</div>
					<div class="col-sm-6">
				<canvas id="mycanvas" width="800" height="400"></canvas>
				<div  id="preview"><img src="" id="flower" class="demo092"/></div>
				
				<div class = "inputbutton"><input name="auctionPic" type="file"  onchange="preview(this)" /></div>
				<button id="btn3" type="button" class="btn btn-primary tranbutton" onclick="trans(0)">Start</button>	
		</div>
		<div class = "music">
		<div style="position: absolute; top: 830px; left: 0; z-index: 4; overflow: hidden;" id="colors"></div>
		</div>
		<div class="col-sm-6 jumbotron square papertext " width="400" height="200" >
			<div id='output'><span class = "glyphicon glyphicon-music"></span>   Result:</div>
			<div id='msg' style="padding-top: 0px; position: absolute;"></div>
			<div class="notice"style="padding-top: 200px; text-align: center; position: absolute; top: 50px; left: 30px;"><span class = "glyphicon glyphicon-info-sign"></span>   
			Notice:Select a structural image and then click "start",we will show the process that the program works and you will get the content from the image.Try it!</div>			
			<div class = "music" style = "padding-top: 250px;">
				<div style="text-align: center; position: absolute; top: -70px; left: -40px; opacity: 0.9" id="colors"></div>
				<div style="margin-bottom: 50px; border: 1px solid #000; background: rgba(255,255,255,0.5); border-radius: 11px; float: left; width: 700px; padding-bottom: 15px; position: relative; z-index: 2;">
					<div class="player" style="height: 60px; box-shadow: 0 -1px #000; margin-bottom: 0; border-bottom-right-radius: 0; border-bottom-left-radius: 0;">
						
						<div style="margin: 0 auto; width: 80px; float: right;">
							<input type="image" src="./images/play.png" align="absmiddle" value="pause" onclick="pausePlayStop()" id="pausePlayStop">
							<input type="image" src="./images/stop.png" align="absmiddle" value="stop" onclick="pausePlayStop(true)">
						</div>
						<div class="time-controls" style="float: left; margin: 0; position: relative; top: 5px;">
							<span style="padding-left:0px" id="time1" class="time">0:00</span>
							<span id="capsule">
								<span id="cursor"></span>
							</span>
							<span id="time2" class="time" style="text-align: left;">-0:00</span>
						</div>
					</div>	
				</div>	
			</div>
		</div>
		</div>
		<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1>
	<div class="approach" id="app">
       		<div class="container">
       			 <div class="gallery-head text-center">
				  <h3>Our Approach</h3>
				  <p>To overcome the challenges:Objects organized in a complex manner ,much semantics in small area and similar objects.</p>
				  <span> </span>
			    </div>
			    <ul class="list1">
			    	<li class="list1_img"><img src="./img/content00.png" class="img-responsive" alt=""/></li>
			    	<li class="list1_desc"><h3>Step 1: Prepare</h3>
			    		<span class="contenttext">Make a Spotlight mechanism to take the change of attention.Spotlight can get better results because of it
			    		is focused by design , it can directly finds a reading path that follows the structure and 
			    		it can be beneficial to separate modules for spotlight and transcription.
			    		</span>
			    	</li>
			    	<p class="no">1<br><br><span>Step</span></p>
			    	<div class="clearfix"> </div>
			    </ul>
			    <ul class="list2">
			    	<li class="list1_desc"><h3>Step 2: Analyse</h3>
			    		<span class="contenttext">Mimic human visual attention more intuitively.Simulate the focus and sequence that people take attention to and think over</span>
			    	</li>
			    	<li class="list1_img"><img src="./img/content1.png" class="img-responsive" alt=""/></li>
			    	<p class="no">2<br><br><span>Step</span></p>
			    	<div class="clearfix"> </div>
			    </ul>
			    <ul class="list1">
			    	<li class="list1_img"><img src="./img/content02.png" class="img-responsive" alt=""/></li>
			    	<li class="list1_desc"><h3>Step 3: Work</h3>
			    		<span class="contenttext">Focus on one spot, write down the content, then focus on another spot.</span>
			    	</li>
			    	<p class="no">3<br><br><span>Step</span></p>
			    	<div class="clearfix"> </div>
			    </ul>
			     <ul class="list2">
			    	<li class="list1_desc"><h3>Step 4: Develop</h3>
			    		<span class="contenttext">Simulate this process by shedding a spotlight and modeling its movement.Finally get the complete structured statement.</span>
			    	</li>
			    	<li class="list1_img"><img src="./img/spotlight.gif" class="img-responsive" alt="" width="383" height="242"/></li>
			    	<p class="no">4<br><br><span>Step</span></p>
			    	<div class="clearfix"> </div>
			    </ul>
       		</div>
       	</div>
       			<div  id="test" class="testmonials">
			<div class="container">
				<div class="head text-center">
						<h3><span> </span> Question Define</h3>
						<p>Before create the model we define the problem as</p>
				</div>
			<!----start-testmonial-time-line---->
			<div class="test-monial-time-line">
				<div class="col-md-6 test-monial-time-line-left">
					<div class="test-monial-time-line-grid test-monial-time-line-grid-l1">
						<div class="col-md-9 test-monial-time-line-left-text">
							<p>Output:token sequence y representing source code</p>
						</div>
						<div class="col-md-3 test-monial-time-line-left-pic">
							<img src="./img/output.png" title="name" />
						</div>
						<span class="grid-point"> </span>
					</div>
				</div>
				<div class="col-md-6 test-monial-time-line-right">
					<div class="test-monial-time-line-grid test-monial-time-line-grid-r1">
						<div class="col-md-3 test-monial-time-line-left-pic">
							<img src="./img/input.png" title="name" />
						</div>
						<div class="col-md-9 test-monial-time-line-left-text">
							<p>Input : W x H gray-scale image x</p>
						</div>
						<span class="grid-point grid-point1"> </span>
					</div>
					<div class="clearfix"> </div>
				</div>
				<div class="test-monial-timeline-connector">
					<span> </span>
				</div>
				<div class="clearfix"> </div>
				<div class="more-testmonial-time-line" > <span>Notice</span><div>
			</div>
			</div>
		</div>
		</div>
		<div class="container">
				<div class="head text-center">
						<h3><span> </span></h3>
						<p>		Note: the process is reversible</p>
				</div>
		</div>
		<div  id="test" class="testmonials">
			<div class="container">
				<div class="head text-center">
						<img  src="./img/content2.png" width="574" height="267"/>
				</div>
			</div>
		</div>
					
<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1>
			<div id="fea" class="features">
			<div class="container">
				<div class="head text-center">
					<h3><span> </span> Model</h3>
					<p>It is depended on Encoder-Decoder architecture.
					 	Using Spotlight module for "where-to-look" problem.
					 	Using GRU based transcribing module for "what-to-write" problem. </p>
					 	<img  src="./img/content31.png" width="1244" height="576" />
				</div>
				<div class="features-grids text-center">
					<div class="col-md-3 features-grid">
						<span class="fea-icon1"><i class="fa fa-star"> </i> </span>
						<h3><a href="#">Image Encoder</a></h3>
						<p>CNN as an encoder following ResNet to extract feature into vectors.</p>
					</div>
					<div class="col-md-3 features-grid">
						<span class="fea-icon1"><i class="fa fa-star"> </i> </span>
						<h3><a href="#">Transcribing decoder</a></h3>
						<p>GRU as a decoderto generate one token at a time.</p>
					</div>
					<div class="col-md-3 features-grid">
						<span class="fea-icon1"><i class="fa fa-star"> </i> </span>
						<h3><a href="#">Spotlight Mechanism</a></h3>
						<p>Get focused information of the input image by moving.</p>
					</div>
					<div class="col-md-3 features-grid">
						<span class="fea-icon1"><i class="fa fa-star"> </i> </span>
						<h3><a href="#">Spotlight Control</a></h3>
						<p>Control spotlight.And we have two implements.</p>
					</div>
					<div class="clearfix"> </div>
				</div>
				<!---- //End-features-grids---->
			</div>
		</div>
			<div class="container">
				<div class="head text-center">
					<h3><span> </span>Implement</h3>
				</div>
			
			<span class = "contenttext">
						<div class="col-sm-6">
					 	<p><div class = "circle"></div>STNM(Spotlight Transcribing Network with Markov property):the next time moving spotlight handle only depends on the before one time movement</p>
					 	<img  src="./img/content39.png" />
					 	</div>	
					 	<div class="col-sm-6">
					 	<p><div class = "circle"></div>STNR(Spotlight Transcribing Network with Recurrent modeling):the next time moving spotlight handle is generate by another GRU</p>
					 	<img  src="./img/content310.png" />	
					 	</div>	
			</span>		
			</div>
			<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1> 	
			<h1><span class="label label-info">Experiment</span></h1>
			<span class = "contenttext">
			<p style = "text-indent:25px;">Now we can do experiment:</p>
			<p><div class="mor" >
				<div class="more">Baselines</div>
				</div>	
			<p>
			<p><h3 style = "text-indent:25px;"></h3><p>

			<p><div class = "circle"></div>Enc-Dec: plain encoder-decoder model</p>	
			<p><div class = "circle"></div>Attn-Dot: encoder-decoder architecture with attention mechanism that calculate weights by inner production</p>	
			<p><div class = "circle"></div>Attn-FC: soft visual attention</p>	
			<p><div class = "circle"></div>Attn-Pos: attention with position embedding</p>	
			<p style = "text-indent:25px;">And we use transcription accuracy to metrics</p>
			<p><div class="mor" >
				<div class="more">Dataset</div>
				</div>	
			<p>
			<p><h3 style = "text-indent:25px;"></h3><p>
				<img  src="./img/content40.png"   />
			<p><div class="mor" >
				<div class="more">Result</div>
				</div>	
			<p>
			<p><h3 style = "text-indent:25px;"></h3><p>
			<h4 style = "text-indent:25px;"><span class="label label-success">Accuracy</span></h4>
				<img  src="./img/content41.png" width="1200" />
			<h4 style = "text-indent:25px;"><span class="label label-success">Loss</span></h4>
				<img  src="./img/content42.png" width="1200" />
			</span>
		<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1>
			<h1><span class="label label-info">Example</span></h1>
			<div class="example"><img  src="./img/example1.png" width="1463" height="367" /></div>
			<div class="example"><img  src="./img/example2.png" width="1463" height="367" /></div>
		<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1>
	</div>





<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1>
<div class = "paperpanel2">
				<p class = "papersubtitle">
				 CONCLUSION<br>
					 <span class = "papertext" >
					 	  In this paper, we presented a novel hierarchical Spotlighted Transcribing Network (STN) for transcribing content from structural images by finding a reading path tracking the image internal structure.
						  Specifically ,we first designed a two-stage “where-to-what”solution with novel spotlight mechanism dedicated for the “where-to-look” problem, providing two implementations under the framework,
						  modeling the spotlight movement through Markov chain and recurrent dependency, respectively. Then, we applied a reinforcement learning method to accurately train and refine the spotlight modeling. Finally, we conducted extensive experiments on one synthetic
						  and two real-world datasets to demonstrate the effectiveness of STN framework with fast model convergence and high performance,
						  and also visualized the learned reading path. We hope this work could lead to more studies in the future.
					 </span>
				</p>
</div>


			
<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1>
<h1><span class="label label-info">DOWNLOAD</span></h1>
<p style = "text-indent:25px;">
<a href='    https://dl.acm.org/ft_gateway.cfm?id=3219962&ftid=1988981&dwn=1&CFID=56333704&CFTOKEN=776e67a2260f711a-27B528F8-955A-F97B-554C31E29625F52D'>
	Transcribing Content from Structural Images with Spotlight Mechanism
</a>
</p >
<HR style="border:1 dashed #987cb9" width="80%" color=#987cb9 SIZE=1>
<h1><span class="label label-info">BibTex</span></h1>
<span>
<p style = "text-indent:25px;">
@inproceedings{yin2018transcribing,
  title={Transcribing Content from Structural Images with Spotlight Mechanism},
</p>
<p style = "text-indent:25px;">
  author={Yin, Yu and Huang, Zhenya and Chen, Enhong and Liu, Qi and Zhang, Fuzheng and Xie, Xing and Hu, Guoping},
  </p>
<p style = "text-indent:25px;">
  booktitle={Proceedings of the 24th ACM SIGKDD International Conference on Knowledge Discovery \& Data Mining},
  </p>
<p style = "text-indent:25px;">
  pages={2643--2652},
  </p>
<p style = "text-indent:25px;">
  year={2018},
  </p>
<p style = "text-indent:25px;">
  organization={ACM}
  </p>
<p style = "text-indent:25px;">
}
</p>
</span>

</body>
</html>